<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="Learn how to build a personal website using Next.js"/><meta property="og:image" content="https://og-image.vercel.app/.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.zeit.co%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content=""/><meta name="twitter:card" content="summary_large_image"/><link rel="preload" as="image" imagesrcset="/_next/image?url=%2Fimages%2Fprofile.jpg&amp;w=128&amp;q=75 1x, /_next/image?url=%2Fimages%2Fprofile.jpg&amp;w=256&amp;q=75 2x"/><title>Sobre consenso de transação em uma blockchain</title><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/0275f6d90e7ad339.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0275f6d90e7ad339.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c39f9723b4064ac0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c39f9723b4064ac0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-f813a7991d8b5eee.js" defer=""></script><script src="/_next/static/chunks/pages/_app-898c436b230de4c1.js" defer=""></script><script src="/_next/static/chunks/562-366f592ba066efbb.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-5030a0f7a23cf43e.js" defer=""></script><script src="/_next/static/ovrLlTsqaglFGu88AuHop/_buildManifest.js" defer=""></script><script src="/_next/static/ovrLlTsqaglFGu88AuHop/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="layout_container__fbLkO"><header class="layout_header__kY0Lt"><a href="/"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27108%27%20height=%27108%27/%3e"/></span><img alt="Daniel Suhett" srcSet="/_next/image?url=%2Fimages%2Fprofile.jpg&amp;w=128&amp;q=75 1x, /_next/image?url=%2Fimages%2Fprofile.jpg&amp;w=256&amp;q=75 2x" src="/_next/image?url=%2Fimages%2Fprofile.jpg&amp;w=256&amp;q=75" decoding="async" data-nimg="intrinsic" class="utils_borderCircle__s2nTm" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></span></a><h2 class="utils_headingLg__5535D"><a class="utils_colorInherit__mSH_x" href="/">Daniel Suhett</a></h2></header><main><article><h1 class="utils_headingXl__u25Y2">Sobre consenso de transação em uma blockchain</h1><div class="utils_lightText__eUzGY"><time dateTime="2022-08-10">August 10, 2022</time></div><div><p>Como a rede concorda sobre quais transações são mais confiáveis.</p>
<h1><strong>Proof-of-Work</strong></h1>
<p>Sistema em que a informação deve ser custosa para ser produzida, mas fácil de ser verificada.,</p>
<ul>
<li>Acertar(Minerar) o <strong>POW</strong> é como jogar dardos em um alvo com os olhos vendados</li>
<li>Probabilidade é igual pra qualquer parte do alvo</li>
<li>Lançadores vai velozes fazem mais acertos por segundo</li>
</ul>
<p>Como é o acerto? Achar um hash <strong>abaixo</strong> de um alvo decidido por um algoritmo.</p>
<h3><strong>Dificuldade</strong></h3>
<p>Representa o valor necessário para achar um bloco válido, se ajusta a cada 2016 blocos, que levam (~2 semanas)</p>
<h3><strong>Pseudocódigo de Mineração com CPU</strong></h3>
<pre><code>Target = (655355 &#x3C;&#x3C; 208) / DIFFICULT;
coinbase_nonce = 0;
while (1) {
	header = makeBlockHeader(transactions, coinbasee__nonce);
	for(header_noncee = 0; header_nonce &#x3C; (1 &#x3C;&#x3C; 32); header_nonce++){
		if(SHA256(SHA256(makeBlock(header, header_nonce))) &#x3C; TARGET){
			break; // BLOCO ENCONTRADO
		}
	}
	coinbase_nonce++;
}
</code></pre>
<h3><strong>Coinbase</strong></h3>
<p>Criar blocos válidos custa:</p>
<ul>
<li>Energia</li>
</ul>
<ul>
<li>Tempo</li>
<li>Dinheiro</li>
</ul>
<p>Pra isso cria-se um sistema de recompensas para que as pessoas se interessem em fazer esse trabalho, recebendo bitcoins <strong>criados</strong></p>
<h3><strong>Taxas de transação</strong></h3>
<ul>
<li>A maioria das transações incluem <strong>transactions fees</strong> para recompensar mineradores</li>
<li>Incentivo para que mineradores incluam sua transação no proximo bloco</li>
<li>Taxas de transação são recolhidas pelo mineirador</li>
<li><code>fees = sum(inputs) - sum(outputs)</code></li>
</ul>
<h1><strong>Proof-of-Stake</strong></h1>
<p>Sistema no qual os nós "apostam" suas moedas para terem chances de serem o próximo validador,</p>
<p>propondo um novo bloco a ser inserido na blockchain.</p>
<ul>
<li>No <strong>PoS</strong> não existem mineiradores e sim validadores
<ul>
<li>não é necessário investir recursos computacionais</li>
</ul>
</li>
<li>O validador pode ser sorteado a propor um bloco na rede
<ul>
<li>existe um peso de quanto mais dinheiro vc coloca mais fácil de ser sorteado</li>
</ul>
</li>
<li>Moedas apostadas não podem ser gastas</li>
<li><strong>Slashing</strong>: moedas destruídas por comportamento indevido</li>
</ul>
<h1><strong>PoW vs PoS</strong></h1>
<ul>
<li><strong>Mineiradores (PoW)</strong>
<ul>
<li>Tem poder de voto proporcional ao seu poder computacional</li>
</ul>
</li>
<li><strong>Validadores (PoS)</strong>
<ul>
<li>Tem poder de voto proporcional ao seu stake apostado</li>
<li>Na rede <strong>eth</strong> o valor é fixo de <strong>32 ETH</strong> mas você poder ter mais de um nó</li>
</ul>
</li>
</ul>
</div></article></main><div class="layout_backToHome__9sjx_"><a href="/">← Voltar</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"consenso-blockchain","contentHtml":"\u003cp\u003eComo a rede concorda sobre quais transações são mais confiáveis.\u003c/p\u003e\n\u003ch1\u003e\u003cstrong\u003eProof-of-Work\u003c/strong\u003e\u003c/h1\u003e\n\u003cp\u003eSistema em que a informação deve ser custosa para ser produzida, mas fácil de ser verificada.,\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAcertar(Minerar) o \u003cstrong\u003ePOW\u003c/strong\u003e é como jogar dardos em um alvo com os olhos vendados\u003c/li\u003e\n\u003cli\u003eProbabilidade é igual pra qualquer parte do alvo\u003c/li\u003e\n\u003cli\u003eLançadores vai velozes fazem mais acertos por segundo\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eComo é o acerto? Achar um hash \u003cstrong\u003eabaixo\u003c/strong\u003e de um alvo decidido por um algoritmo.\u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003eDificuldade\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003eRepresenta o valor necessário para achar um bloco válido, se ajusta a cada 2016 blocos, que levam (~2 semanas)\u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003ePseudocódigo de Mineração com CPU\u003c/strong\u003e\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003eTarget = (655355 \u0026#x3C;\u0026#x3C; 208) / DIFFICULT;\ncoinbase_nonce = 0;\nwhile (1) {\n\theader = makeBlockHeader(transactions, coinbasee__nonce);\n\tfor(header_noncee = 0; header_nonce \u0026#x3C; (1 \u0026#x3C;\u0026#x3C; 32); header_nonce++){\n\t\tif(SHA256(SHA256(makeBlock(header, header_nonce))) \u0026#x3C; TARGET){\n\t\t\tbreak; // BLOCO ENCONTRADO\n\t\t}\n\t}\n\tcoinbase_nonce++;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e\u003cstrong\u003eCoinbase\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003eCriar blocos válidos custa:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEnergia\u003c/li\u003e\n\u003c/ul\u003e\n\u003cul\u003e\n\u003cli\u003eTempo\u003c/li\u003e\n\u003cli\u003eDinheiro\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePra isso cria-se um sistema de recompensas para que as pessoas se interessem em fazer esse trabalho, recebendo bitcoins \u003cstrong\u003ecriados\u003c/strong\u003e\u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003eTaxas de transação\u003c/strong\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eA maioria das transações incluem \u003cstrong\u003etransactions fees\u003c/strong\u003e para recompensar mineradores\u003c/li\u003e\n\u003cli\u003eIncentivo para que mineradores incluam sua transação no proximo bloco\u003c/li\u003e\n\u003cli\u003eTaxas de transação são recolhidas pelo mineirador\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003efees = sum(inputs) - sum(outputs)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e\u003cstrong\u003eProof-of-Stake\u003c/strong\u003e\u003c/h1\u003e\n\u003cp\u003eSistema no qual os nós \"apostam\" suas moedas para terem chances de serem o próximo validador,\u003c/p\u003e\n\u003cp\u003epropondo um novo bloco a ser inserido na blockchain.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNo \u003cstrong\u003ePoS\u003c/strong\u003e não existem mineiradores e sim validadores\n\u003cul\u003e\n\u003cli\u003enão é necessário investir recursos computacionais\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eO validador pode ser sorteado a propor um bloco na rede\n\u003cul\u003e\n\u003cli\u003eexiste um peso de quanto mais dinheiro vc coloca mais fácil de ser sorteado\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMoedas apostadas não podem ser gastas\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSlashing\u003c/strong\u003e: moedas destruídas por comportamento indevido\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e\u003cstrong\u003ePoW vs PoS\u003c/strong\u003e\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eMineiradores (PoW)\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003eTem poder de voto proporcional ao seu poder computacional\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eValidadores (PoS)\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003eTem poder de voto proporcional ao seu stake apostado\u003c/li\u003e\n\u003cli\u003eNa rede \u003cstrong\u003eeth\u003c/strong\u003e o valor é fixo de \u003cstrong\u003e32 ETH\u003c/strong\u003e mas você poder ter mais de um nó\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","title":"Sobre consenso de transação em uma blockchain","date":"2022-08-10"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"consenso-blockchain"},"buildId":"ovrLlTsqaglFGu88AuHop","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>